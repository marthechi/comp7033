{% extends 'base.html' %}
{% block content %}
<div class="container">
    <div class="row" >
        <nav arial-label ="breadcrumb">
            <ol class="breadcrumb" style="background-color: white">
                <li class="breadcrumb-item">
                    <a href="{{ url_for('dashboard') }}"> Dashboard </a>
                </li>
                 <li class="breadcrumb-item active">
                     Create restaurant
                </li>
            </ol>
        </nav>
        <div class="col-md-6 col-12 mx-auto">
            <form method="post" class="mt-3" action="{{ url_for('stepTwo') }}"
            enctype="multipart/form-data">
                <div class="form-group">
                    <label for="email">Available seats/Table:</label>
                    <input type="number" name="available_seats" placeholder="Available seats"
                    class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">Room layout:</label> <br>
                    <input type=file name='image' onchange="showPreview(event)"> 
                    <div class="preview text-center">
                        <img id="file-ip-1-preview">
                    </div>
                </div>
                <div class="form-group">
                    <label for="exampleInputEmail1">Additional info (packing space, others)</label> <br>
                    <input type="file" id="file-input" name="room-gallery"
                     accept="image/png, image/jpeg" 
                     style="display: none;" onchange="preview()" multiple>
                    <label for="file-input" class="btn btn-md btn-primary">
                        <i class="fas fa-upload"></i> &nbsp; Upload Pictures
                    </label>
                    <p id="num-of-files">No Files Chosen</p>
                    <div id="images"></div>
                </div>
                <div class="form-group mb-2">
                    <button type="submit" class="btn btn-lg btn-primary w-100"> Next </button>
                </div>
            </form>
        </div>
    </div>
</div>


<script>
    function showPreview(event){
        if(event.target.files.length > 0){
            var src = URL.createObjectURL(event.target.files[0]);
            var preview = document.getElementById("file-ip-1-preview");
            preview.src = src;
            preview.style.height= '100px'
            preview.style.width= '100px'
            // preview.style.display = "block";
        }
    }

    let fileInput = document.getElementById("file-input");
let imageContainer = document.getElementById("images");
let numOfFiles = document.getElementById("num-of-files");

function preview(){
    imageContainer.innerHTML = "";
    numOfFiles.textContent = `${fileInput.files.length} Files Selected`;

    for(i of fileInput.files){
        let reader = new FileReader();
        let figure = document.createElement("figure");
        let figCap = document.createElement("figcaption");
        figCap.innerText = i.name;
        figure.appendChild(figCap);
        // reader.onload=()=>{
        //     let img = document.createElement("img");
        //     img.setAttribute("src",reader.result);
        //     figure.insertBefore(img,figCap);
        // }
        // imageContainer.appendChild(figure);
        // reader.readAsDataURL(i);
    }
}
</script>

{% endblock %}